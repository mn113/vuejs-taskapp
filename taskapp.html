<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>TaskApp</title>
	<link rel="icon" type="image/x-icon" href="img/favicon.ico">
	<!-- inject:css -->
	<link rel="stylesheet" href="css/normalize.css">
	<link rel="stylesheet" href="css/taskapp.css">
	<!-- endinject -->
	<!--[if lte IE 10]><Flexbox polyfill>
	<script src="js/flexibility.js"></script>
	<script type="text/javascript">flexibility(document.getElementById("app"));</script>
	<![endif]-->
</head>
<body>
	<!-- start of Vue app container -->
	<div id="app">
		<task-list v-ref:taskList v-bind:list.sync="tasks" v-bind:trash.sync="trash"></task-list>
		<div id="sidebar">
			<task-ui v-ref:taskUi v-bind:tags.sync="tags" v-bind:colours="colours"></task-ui>
			<section id="info">
				<h3>About</h3>
				<p>A modern, browser-based Task List / To-Do List app with just enough features to enhance your productivity and organise your focus, without being slow or bloated.</p>
				<h3>My Tasks Will Go On</h3>
				<p>The app state is autosaved to the browser session, so no worries about saving, closing or shutting down.</p>
				<h3>Hotkeys</h3>
				<dl>
					<dt>&#8593;,&#8595;</dt><dd>Navigate list</dd>
					<dt>&#8629;</dt><dd>Edit/Save task</dd>
					<dt>x</dt><dd>Mark task completed</dd>
					<dt>n</dt><dd>New task</dd>
					<dt>D</dt><dd>Delete task</dd>
					<dt>U</dt><dd>Undelete task</dd>
					<p>Re-order tasks by dragging and dropping.<br>
					Add and remove tags by clicking them.</p>
				</dl>
				<h3>Made With</h3>
				<img src="img/logo_html5.png" alt="HTML5" height="40">
				<img src="img/logo_css3.png" alt="CSS3" height="40">
				<img src="img/logo_vuejs.png" alt="Vue.js">
				<img src="img/logo_fontawesome.jpg" alt="Font Awesome">
				<p>
					<a href="https://github.com/mn113/vuejs-taskapp">github.com/mn113/vuejs-taskapp</a>
				</p>
			</section>
		</div>
	</div>
	<!-- end of Vue app container -->

	<!-- First component template -->
	<template id="task-list-tpl">
	<section>
		<h1 data-tooltip title="My tasks">My Tasks <span class="subhead">({{ remaining }} remaining)</span></h1>

		<span>Filter:</span>
		<form id="filter" v-bind:search="search">
			<input v-model.trim="search">
			<i class="fa fa-times-circle" aria-hidden="true" v-on:click="search = ''"></i>
		</form>

		<ul id="task-ul" v-show="filteredTasks.length > 0">
			<li class="list-item flex-container"
				v-for="(index, task) in filteredTasks"
				data-id="{{ index }}"
				v-bind:class="{completed: task.completed, selected: task.id == selectedId}"
				v-on:click="selectTask(task.id)">

				<div class="group">
					<input type="checkbox" v-model="task.completed">

					<!-- Task body: -->
					<span v-show="editingId !== task.id" class="task-body">{{ task.body }}</span>
					<input v-show="editingId == task.id" v-model="task.body" placeholder="New task"
						   v-on:keyup.enter="editingId = null">
				</div>

				<div class="group">
					<div class="group_inner">
						<!-- Tags: -->
						<span v-for="(i, t) in task.tags"
						  	  class="tag" v-on:click="deleteTag(task.id, t)">
							  {{ t }}
						</span>
						<!-- Colours: -->
						<span v-for="(i, c) in task.colours"
							  class="colour" v-bind:class="c" v-on:click="deleteColour(task.id, c)">
						</span>
					</div>
					<div class="group_inner">
						<!-- Task actions: -->
						<span class="editBtn" v-on:click="editTask(task.id)">
							{{ editingId == task.id ? 'Save' : 'Edit' }}
						</span>
						<i class="fa fa-trash-o" aria-hidden="true" v-on:click="deleteTask(task.id)"></i>
					</div>
				</div>
			</li>
		</ul>
		<p v-else>No tasks here.</p>

		<div class="cf">
			<form id="task-buttons">
				<button v-on:click.prevent="newTask" v-on:keyup.n="newTask">Add Task</button>
				<button v-show="list.length > 0" v-on:click.prevent="clearCompleted">Clear Completed</button>
				<i class="fa fa-trash" v-bind:class="{active: trash.length > 0}" v-on:click="unTrashLast"
				data-tooltip="{'offset':10}" title="Undelete tasks" aria-hidden="true" ></i>
			</form>
		</div>
		<!--p style="color:green">{{ list | json }}</p>
		<hr />
		<p style="color:red">{{ trash | json }}</p-->
	</section>
	</template>

	<!-- Second component template -->
	<template id="ui-tpl">
	<section>
		<h3>Toolbox</h3>
		<div id="tag-list" v-bind:class="{editing: editingTags}">
			<p>Tags:
				<span class="editBtn" v-on:click="toggleEditingGlobalTags">
					{{ editingTags ? 'Close' : 'Edit' }}
				</span>
			</p>
			<div class="flex-container">
				<span v-for="t in tags">
					<span class="tag" v-on:click="addTag(t)">
					  {{ t }}
					</span>
					<i v-show="editingTags" class="fa fa-trash-o" aria-hidden="true" v-on:click="deleteGlobalTag(t)"></i>
				</span>
			</div>
			<form v-show="editingTags">
				<input size="10" v-model.trim="newTag" placeholder="tag" v-on:keyup.enter="addGlobalTag(newTag)">
				<button type="submit" v-on:click.prevent="addGlobalTag(newTag)">Add Tag</button>
			</form>
		</div>

		<div id="colour-list">
			<p>Colours:</p>
			<span v-for="c in colours"
				  class="colour"
				  :class="c"
				  v-on:click="addColour(c)">
			</span>
		</div>

		<p> Export tasks as
			<abbr v-on:click="exportTasks('csv')">CSV</abbr>
			<abbr v-on:click="exportTasks('json')">JSON</abbr>
		</p>
	</section>
	</template>


	<!-- inject:js -->
	<script src="js/mousetrap.js"></script>
	<script src="js/mousetrap-bind-dictionary.min.js"></script>
	<script src="js/vue.1.0.28.js"></script>
	<script src="js/Sortable.js"></script>
	<script src="js/taskapp.js"></script>
	<script src="js/fontawesome_bfab10ea54.js"></script>
	<script src="js/Tooltip.js"></script>
	<!-- endinject -->
</body>
</html>
