<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vue.js</title>
	<link rel="stylesheet" href="css/normalize.css">
	<link rel="stylesheet" href="css/style.css">
</head>
<body>

	<div id="app">
		<!-- property: -->
		<h1>{{ message }}</h1>		
		<input v-model="message">

		<hr>

		<!-- show/hide & submit: -->
		<form action="done.html" v-on:submit.prevent="handleForm">
			<p v-model="errormsg" v-show="!vuetext" class="error">{{ errormsg }}</p>
			<textarea v-model="vuetext" name="stuff" id="stuff" cols="30" rows="5"></textarea>
			<button type="submit" v-show="vuetext" >Send Message</button>
		</form>

		<hr>

		<!-- components: -->
		<mycard subject="Jim"></mycard>
		<mycard subject="Bob"></mycard>
		<mycard subject="Ruth"></mycard>

		<hr>

		<!-- computed property: -->
		<h2>Skill: {{ skill }}</h2>
		<input type="text" v-model="points" style="width: 3em">
		<button @click="points += 1">+</button>
		<button @click="points -= 1">-</button>
		<button @click="points += 10">+10</button>
		<button @click="points -= 10">-10</button>

		<hr>

		<!-- loops & bindings: -->
		<table>
			<tr v-for="plan in plans">
				<plan :plan="plan" :active-in-child.sync="active" inline-template>
				<!-- plan element will not be rendered -->
					{{ plan | json }}
					<td>{{ plan.name }}</td>
					<td>${{ plan.price }}/month</td>
					<td>
						<button @click="setActivePlan"
								v-show="plan.name !== active.name">
							{{ isUpgrade ? "Upgrade" : "Downgrade" }}
						</button>
						<span v-else>Selected plan</span>
					</td>
				</plan>
			</tr>
		</table>

	</div><!-- end of Vue app container -->

	<template id="mycard-template">
		<div class="card">
			<h2>{{ subject }}</h2>
			<p>{{ description }}</p>
			<img v-show="img" src="http://lorempixel.com/100/100/">
			<button @click="x += 1">{{ x }}</button>
		</div>
	</template>

	<!--script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.0.1/vue.js"></script-->
	<script src="js/vue.1.0.28.js"></script>
	<script>

		Vue.component('mycard', {	// the tag name
			template: "#mycard-template",	// css selector
			props: ['subject', 'description'],	// multi-instance variables
			data: function() {
				return { x: 0 };
			}
		});

		new Vue({
			config: {debug: true},
			el: "#app",
			data: {
				message: "Hello World",
				vuetext: '',
				errormsg: 'You must enter a message',
				points: 150,
				plans: [
					{ name: "Pro", price: 300 },
					{ name: "Enhanced", price: 150 },
					{ name: "Basic", price: 75 },
					{ name: "Free", price: 0 }
				],
				active: {}
			},
			ready: function() {
				this.active = this.plans[2];
			},

			computed: {
				skill: function() {
					return this.points > 200 ? 'Advanced' : ( this.points > 100 ? 'Intermediate' : 'Beginner');
				}
			},
			methods: {
				handleForm: function() {
					alert("Form submitted");
				},
			},
			components: {
				plan: {
					props: ['plan','activeInChild'],
					computed: {
						isUpgrade: function() {
							return this.plan.price < this.active.price;
						}	
					},
					methods: {
						setActivePlan: function() {
							this.active = this.plan;						
						}
					}
				}
			}
		});

	</script>
</body>
</html>